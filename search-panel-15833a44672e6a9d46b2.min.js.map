{"version":3,"sources":["webpack:///search-panel-15833a44672e6a9d46b2.min.js","webpack:///webpack/bootstrap 15833a44672e6a9d46b2","webpack:///./src/chunks/search-panel.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","16","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","$","document","ready","renderProductItem","item","id","title","price","units","oldPrice","url","imgUrl","className","filter","Boolean","join","oldPriceContent","escapeHtml","content","renderProducts","items","slice","maxDisplayingProducts","map","itemsContainer","innerHTML","setLoading","loadingCounter","searchPanel","classList","toggle","setWaiting","waitingCounter","requestServerData","encodedValue","encodeURIComponent","searchValue","clearQueueTimer","requestController","abort","AbortController","signal","apiPathPrefix","fetch","res","isDev","setTimeout","ok","status","statusText","text","body","reason","errMsg","console","Error","data","undefined","JSON","parse","Array","isArray","__genertateDemoProducts","count","Math","floor","random","from","_none","no","round","assign","sampleProduct","replace","String","itemsCount","length","resultsCountNode","innerText","dataHasBeenLoaded","catch","finally","queueTimerHandler","clearTimeout","setQueueTimer","acceptChangesDelay","closePanel","isVisible","updatePanelStatus","detectEsc","ev","preventClose","preventDefault","stopPropagation","closeByClick","_ev","goToResults","triggerForm","submit","str","trim","updateSearchValueInDocument","escapedValue","bodyInput","panelInput","panelInputChanged","addEventListener","searchPanelContainer","removeEventListener","focus","onTriggerClick","window","location","host","startsWith","getElementById","querySelector","contains","warn","closeButton","goToResultsButton","searchPanelButtonButton","urlParams","URLSearchParams","search"],"mappings":"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","file":"search-panel-15833a44672e6a9d46b2.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 16);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 16:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n// @ts-check\n\n$(document).ready(function () {\n  /// Start...\n\n  var isDev = window.location.host.startsWith('localhost') || window.location.host.startsWith('imodelist.lilliputten.ru');\n\n  /** Generate a list of random (*) products. Only for dev mode. */\n  var __genertateDemoProducts = true;\n\n  var maxDisplayingProducts = 3;\n\n  // Required node:\n  var searchPanel = /** @type {HTMLDivElement} */document.getElementById('search-panel');\n  if (!searchPanel) {\n    console.error('[search-panel:init] No search panel node found');\n    debugger;\n    return;\n  }\n  var searchPanelContainer = /** @type {HTMLDivElement} */searchPanel.querySelector('.container');\n  if (!searchPanelContainer) {\n    console.error('[search-panel:init] No search panel container found');\n    debugger;\n    return;\n  }\n  var itemsContainer = /** @type {HTMLDivElement} */searchPanel.querySelector('.results-panel-items');\n  if (!itemsContainer) {\n    console.error('[search-panel:init] No search panel items container found');\n    debugger;\n    return;\n  }\n\n  // Other optional nodes...\n  var resultsCountNode = /** @type {HTMLElement|null} */searchPanel.querySelector('#results-count');\n\n  /** @type {boolean} */\n  var isVisible = searchPanel.classList.contains('visible');\n\n  /** @type {string} */\n  var searchValue = '';\n\n  var triggerForm = /** @type {HTMLFormElement} */document.getElementById('search-panel-trigger');\n  if (!triggerForm) {\n    console.warn('[search-panel:init] No search panel trigger form found');\n    debugger;\n    return;\n  }\n\n  var panelInput = /** @type {HTMLInputElement} */searchPanel.querySelector('#search-panel-input');\n  if (!panelInput) {\n    console.warn('[search-panel:init] No search panel input field found');\n    debugger;\n    return;\n  }\n\n  var bodyInput = /** @type {HTMLInputElement} */triggerForm.querySelector('input[name=\"q\"]');\n  if (!panelInput) {\n    console.warn('[search-panel:init] No body form input field found');\n    debugger;\n    return;\n  }\n\n  /// Render products...\n\n  /**\n   * @typedef {Object} ProductsItem\n   * @property {string|number} id - Product id or art.no\n   * @property {string} value - Product title\n   * @property {string} text - Product short name (whatever it is)\n   * @property {number|string} price - Price, eg '1 300' (space delimited)\n   * @property {string} [units] - Currency, optional, default is \"—Ä.\" (Russian rubles)\n   * @property {number|string} [oldPrice] - Old price, the same as `price`, optional\n   * @property {string} url - Url in the catalogue\n   * @property {string} imgUrl - Image url\n   */\n\n  /** Sample product item data\n   * @type {ProductsItem}\n   */\n  var sampleProduct = {\n    id: 70063,\n    value: '70063 –ê–∫–∞–Ω –ö—Ä–∞—Å–∫–∞ –≤–æ–¥–æ—Ä–∞—Å—Ç–≤–æ—Ä–∏–º–∞—è Western Approaches Blue –æ–∫—Ä–∞—Å–∫–∞ –Ω–∞–¥–≤–æ–¥–Ω—ã—Ö –±–æ—Ä—Ç–æ–≤ –∫–æ—Ä–∞–±–ª–µ–π –í–ú–§ –ê–Ω–≥–ª–∏–∏ —Å 1941 –≥–æ–¥–∞',\n    text: '70063',\n    price: '1 200',\n    oldPrice: '1 650',\n    url: '/goods/klei/akan/123/110/38247.html',\n    imgUrl: '/assets/example/product.png' // '/file/i/207/207/769436ae/bdb355b865c7d64c38322a06dd7221d6.jpg',\n  };\n\n  /** @param {ProductsItem} item */\n  function renderProductItem(item) {\n    var id = item.id,\n        title = item.value,\n        price = item.price,\n        _item$units = item.units,\n        units = _item$units === undefined ? '—Ä.' : _item$units,\n        oldPrice = item.oldPrice,\n        url = item.url,\n        imgUrl = item.imgUrl;\n\n    var className = ['prod-item', !!oldPrice && 'has_old_price'].filter(Boolean).join(' ');\n    var oldPriceContent = oldPrice ? '<span class=\"prod-item__price_old_price old_price\">' + escapeHtml(oldPrice) + escapeHtml(units) + '</span>' : '';\n    var content = '<div class=\"' + className + '\" id=\"product-' + escapeHtml(id) + '\">\\n  <a href=\"' + escapeHtml(url) + '\" class=\"img-holder\">\\n    <img src=\"' + escapeHtml(imgUrl) + '\" alt=\"' + escapeHtml(title) + '\" />\\n  </a>\\n  <div class=\"prod-item__right\">\\n    <div class=\"prod-item__name\">\\n      <a href=\"' + escapeHtml(url) + '\">' + escapeHtml(title) + '</a>\\n    </div>\\n    <div class=\"d-flex txt_14px align-items-center\">\\u0410\\u0440\\u0442\\u0438\\u043A\\u0443\\u043B: ' + escapeHtml(id) + '</div>\\n    <div class=\"prod-item__price_and_buttons\">\\n      <p class=\"prod-item__price\">\\n        ' + oldPriceContent + ' <span class=\"prod-item__price_value\" data-thousand-separate=\"\">' + escapeHtml(price) + '</span><span class=\"prod-item__price_units txt_14px\">' + escapeHtml(units) + '</span>\\n      </p>\\n      <div class=\"prod-item_buttons\">\\n        <button data-remote=\"/add/ok\" class=\"prod-item__btn_cart btn red\" data-buy=\"\" data-id=\"' + escapeHtml(id) + '\" data-price=\"' + escapeHtml(price) + '\" title=\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\">\\n          <i class=\"icon icon_cart text-white txt_12px mr-2\"></i> \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\\n        </button>\\n        <a href=\"' + escapeHtml(url) + '\" class=\"prod-item__btn_go btn gray\" title=\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0443\">\\n          <span>\\uD83E\\uDC62</span>\\n        </a>\\n      </div>\\n    </div>\\n  </div>\\n</div>';\n    return content;\n  }\n\n  /** Renders first `maxDisplayingProducts` items of retrieved products.\n   * @param {ProductsItem[]} items\n   */\n  function renderProducts(items) {\n    var content = items.slice(0, maxDisplayingProducts).map(renderProductItem).join('\\n');\n    // NOTE: All the substituted values are escaped\n    itemsContainer.innerHTML = content;\n  }\n\n  /// Server request...\n\n  /** AbortController instance\n   * @type {AbortController|undefined} */\n  var requestController = undefined;\n\n  var apiPathPrefix = !isDev ? '/search/suggestion/?q=' : '/assets/suggestion.json?q=';\n\n  /** Queued request timer handler\n   * @type {ReturnType<typeof setTimeout>|undefined}\n   */\n  var queueTimerHandler = undefined;\n\n  /** Delay to invoke the server request\n   * @type {number}\n   */\n  var acceptChangesDelay = 1000;\n\n  var dataHasBeenLoaded = false;\n\n  var loadingCounter = 0;\n  var waitingCounter = 0;\n\n  /** Set loading panel status\n   * @param {boolean} value\n   */\n  function setLoading(value) {\n    loadingCounter += value ? 1 : -1;\n    searchPanel.classList.toggle('loading', loadingCounter > 0);\n  }\n\n  /** Set waiting panel status\n   * @param {boolean} value\n   */\n  function setWaiting(value) {\n    waitingCounter += value ? 1 : -1;\n    searchPanel.classList.toggle('waiting', waitingCounter > 0);\n  }\n\n  function requestServerData() {\n    var _this = this;\n\n    // Prepare data...\n    var value = searchValue;\n    var encodedValue = encodeURIComponent(searchValue);\n    // Clear timer\n    clearQueueTimer();\n    // Check active request\n    if (requestController) {\n      // Cancel previously created request, if it's exists\n      requestController.abort();\n    }\n    requestController = new AbortController();\n    var signal = requestController.signal;\n    // Prepare request...\n    var url = apiPathPrefix + encodedValue;\n    // Send and process the request...\n    setLoading(true);\n    var promise = fetch(url, { signal: signal }).then(function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n        var ok, status, statusText, body, reason, errMsg, data, _errMsg;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!isDev) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, 1000);\n                });\n\n              case 3:\n                ok = res.ok, status = res.status, statusText = res.statusText;\n                _context.next = 6;\n                return res.text();\n\n              case 6:\n                body = _context.sent;\n\n                if (ok) {\n                  _context.next = 12;\n                  break;\n                }\n\n                reason = [status, statusText].filter(Boolean).join(', ');\n                errMsg = 'Request failed (' + reason + ')';\n\n                console.error('[search-panel:requestServerData]', errMsg, {\n                  status: status,\n                  statusText: statusText,\n                  body: body,\n                  res: res,\n                  url: url\n                });\n                throw new Error(errMsg);\n\n              case 12:\n                /** @type {object|undefined} */\n                data = undefined;\n                _context.prev = 13;\n\n                data = JSON.parse(body);\n                _context.next = 22;\n                break;\n\n              case 17:\n                _context.prev = 17;\n                _context.t0 = _context['catch'](13);\n                _errMsg = 'Cannot parse response';\n\n                console.error('[search-panel:requestServerData]', _errMsg, {\n                  error: _context.t0,\n                  body: body,\n                  res: res,\n                  url: url\n                });\n                throw new Error(_errMsg);\n\n              case 22:\n                if (data) {\n                  _context.next = 24;\n                  break;\n                }\n\n                throw new Error('Empty data returned');\n\n              case 24:\n                if (Array.isArray(data)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                throw new Error('Expected array data');\n\n              case 26:\n                return _context.abrupt('return', data);\n\n              case 27:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[13, 17]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).then(function ( /** @type {ProductsItem[]} */items) {\n      // DEMO: Create random data...\n      if (isDev && __genertateDemoProducts) {\n        var count = Math.floor(Math.random() * 6);\n        items = Array.from(Array(count)).map(function (_none, no) {\n          // return sampleProduct;\n          var id = 1000 + Math.round(Math.random() * 9000);\n          var price = 50 + Math.round(Math.random() * 600);\n          return Object.assign({}, sampleProduct, {\n            id: id,\n            value: sampleProduct.value.replace(/^\\d+/, String(id)),\n            price: price,\n            oldPrice: Math.round(Math.random()) ? price + Math.round(Math.random() * 300) : ''\n          });\n        });\n      }\n      // Render received data\n      renderProducts(items);\n      // Update the state\n      var itemsCount = items.length;\n      resultsCountNode && (resultsCountNode.innerText = String(itemsCount));\n      searchPanel.classList.toggle('has_results', !!itemsCount);\n      dataHasBeenLoaded = true;\n    }).catch(function (error) {\n      if (error.name !== 'AbortError') {\n        console.error('[search-panel:requestServerData]', {\n          error: error,\n          url: url\n        });\n        debugger;\n      }\n    }).finally(function () {\n      setLoading(false);\n      requestController = undefined;\n    });\n    return promise;\n  }\n\n  function clearQueueTimer() {\n    if (queueTimerHandler) {\n      clearTimeout(queueTimerHandler);\n      queueTimerHandler = undefined;\n      setWaiting(false);\n    }\n  }\n\n  function setQueueTimer() {\n    clearQueueTimer();\n    queueTimerHandler = setTimeout(requestServerData, acceptChangesDelay);\n    setWaiting(true);\n  }\n\n  /// Routines...\n\n  function closePanel() {\n    if (isVisible) {\n      isVisible = false;\n      updatePanelStatus();\n    }\n  }\n\n  /** Close the panel if the Escape key clicked\n   * @param {KeyboardEvent} ev\n   */\n  function detectEsc(ev) {\n    if (ev.key === 'Escape') {\n      closePanel();\n    }\n  }\n\n  /** Prevent close the panel if it's been clicked inside\n   * @param {MouseEvent} ev\n   */\n  function preventClose(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Close the panel by click outside the panel (see `preventClose` method above)\n   * @param {MouseEvent} _ev\n   */\n  function closeByClick(_ev) {\n    closePanel();\n  }\n\n  function goToResults() {\n    triggerForm.submit();\n  }\n\n  /** @param {string|number|boolean|undefined|null} str\n   * @return {string}\n   */\n  function escapeHtml(str) {\n    if (str == undefined) {\n      return '';\n    }\n    if (typeof str !== 'string') {\n      str = String(str);\n    }\n    str = str.trim();\n    return str.replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n\n  /** Sync search text in document with current value */\n  function updateSearchValueInDocument() {\n    var escapedValue = escapeHtml(searchValue);\n    bodyInput.value = escapedValue;\n    panelInput.value = escapedValue;\n  }\n\n  /** Search text has been changed\n   * @param {Event} _ev\n   */\n  function panelInputChanged(_ev) {\n    searchValue = panelInput.value;\n    bodyInput.value = searchValue;\n    setQueueTimer();\n  }\n\n  function updatePanelStatus() {\n    updateSearchValueInDocument();\n    searchPanel.classList.toggle('visible', !!isVisible);\n    // Set/reset event handlers\n    if (isVisible) {\n      panelInput.addEventListener('input', panelInputChanged);\n      searchPanelContainer.addEventListener('mouseup', preventClose, true);\n      document.addEventListener('mouseup', closeByClick);\n      document.addEventListener('keydown', detectEsc);\n    } else {\n      panelInput.removeEventListener('input', panelInputChanged);\n      searchPanelContainer.addEventListener('mouseup', preventClose);\n      document.removeEventListener('mouseup', closeByClick);\n      document.removeEventListener('keydown', detectEsc);\n    }\n    // Focus in the input field\n    if (isVisible) {\n      setTimeout(function () {\n        return panelInput.focus();\n      }, 100);\n    }\n  }\n\n  /** @param {MouseEvent} ev */\n  function onTriggerClick(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    isVisible = !isVisible;\n    if (!dataHasBeenLoaded && isVisible && searchValue) {\n      requestServerData();\n    }\n    updatePanelStatus();\n  }\n\n  function init() {\n    var closeButton = searchPanel.querySelector('#close-button');\n    var goToResultsButton = searchPanel.querySelector('#go-to-results');\n    var searchPanelButtonButton = searchPanel.querySelector('#search-panel-button');\n\n    var urlParams = new URLSearchParams(window.location.search);\n    searchValue = urlParams.get('q') || '';\n\n    triggerForm.addEventListener('click', onTriggerClick);\n    closeButton && closeButton.addEventListener('click', closePanel);\n    goToResultsButton && goToResultsButton.addEventListener('click', goToResults);\n    searchPanelButtonButton && searchPanelButtonButton.addEventListener('click', goToResults);\n\n    if (isVisible) {\n      updatePanelStatus();\n    } else {\n      updateSearchValueInDocument();\n    }\n  }\n\n  init();\n});\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// search-panel-15833a44672e6a9d46b2.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 15833a44672e6a9d46b2","// @ts-check\n\n$(document).ready(function () {\n  /// Start...\n\n  const isDev =\n    window.location.host.startsWith('localhost') ||\n    window.location.host.startsWith('imodelist.lilliputten.ru');\n\n  /** Generate a list of random (*) products. Only for dev mode. */\n  const __genertateDemoProducts = true;\n\n  const maxDisplayingProducts = 3;\n\n  // Required node:\n  const searchPanel = /** @type {HTMLDivElement} */ (document.getElementById('search-panel'));\n  if (!searchPanel) {\n    console.error('[search-panel:init] No search panel node found');\n    debugger;\n    return;\n  }\n  const searchPanelContainer = /** @type {HTMLDivElement} */ (\n    searchPanel.querySelector('.container')\n  );\n  if (!searchPanelContainer) {\n    console.error('[search-panel:init] No search panel container found');\n    debugger;\n    return;\n  }\n  const itemsContainer = /** @type {HTMLDivElement} */ (\n    searchPanel.querySelector('.results-panel-items')\n  );\n  if (!itemsContainer) {\n    console.error('[search-panel:init] No search panel items container found');\n    debugger;\n    return;\n  }\n\n  // Other optional nodes...\n  const resultsCountNode = /** @type {HTMLElement|null} */ (\n    searchPanel.querySelector('#results-count')\n  );\n\n  /** @type {boolean} */\n  let isVisible = searchPanel.classList.contains('visible');\n\n  /** @type {string} */\n  let searchValue = '';\n\n  const triggerForm = /** @type {HTMLFormElement} */ (\n    document.getElementById('search-panel-trigger')\n  );\n  if (!triggerForm) {\n    console.warn('[search-panel:init] No search panel trigger form found');\n    debugger;\n    return;\n  }\n\n  const panelInput = /** @type {HTMLInputElement} */ (\n    searchPanel.querySelector('#search-panel-input')\n  );\n  if (!panelInput) {\n    console.warn('[search-panel:init] No search panel input field found');\n    debugger;\n    return;\n  }\n\n  const bodyInput = /** @type {HTMLInputElement} */ (triggerForm.querySelector('input[name=\"q\"]'));\n  if (!panelInput) {\n    console.warn('[search-panel:init] No body form input field found');\n    debugger;\n    return;\n  }\n\n  /// Render products...\n\n  /**\n   * @typedef {Object} ProductsItem\n   * @property {string|number} id - Product id or art.no\n   * @property {string} value - Product title\n   * @property {string} text - Product short name (whatever it is)\n   * @property {number|string} price - Price, eg '1 300' (space delimited)\n   * @property {string} [units] - Currency, optional, default is \"—Ä.\" (Russian rubles)\n   * @property {number|string} [oldPrice] - Old price, the same as `price`, optional\n   * @property {string} url - Url in the catalogue\n   * @property {string} imgUrl - Image url\n   */\n\n  /** Sample product item data\n   * @type {ProductsItem}\n   */\n  const sampleProduct = {\n    id: 70063,\n    value:\n      '70063 –ê–∫–∞–Ω –ö—Ä–∞—Å–∫–∞ –≤–æ–¥–æ—Ä–∞—Å—Ç–≤–æ—Ä–∏–º–∞—è Western Approaches Blue –æ–∫—Ä–∞—Å–∫–∞ –Ω–∞–¥–≤–æ–¥–Ω—ã—Ö –±–æ—Ä—Ç–æ–≤ –∫–æ—Ä–∞–±–ª–µ–π –í–ú–§ –ê–Ω–≥–ª–∏–∏ —Å 1941 –≥–æ–¥–∞',\n    text: '70063',\n    price: '1 200',\n    oldPrice: '1 650',\n    url: '/goods/klei/akan/123/110/38247.html',\n    imgUrl: '/assets/example/product.png', // '/file/i/207/207/769436ae/bdb355b865c7d64c38322a06dd7221d6.jpg',\n  };\n\n  /** @param {ProductsItem} item */\n  function renderProductItem(item) {\n    const {\n      id, // Product id or art.no\n      value: title, // Product title\n      // text, // Product short name (whatever it is)\n      price, // Price, eg '1 300' (space delimited)\n      units = '—Ä.', // Currency, optional, default is \"—Ä.\" (Russian rubles)\n      oldPrice, // Old price, the same as `price`, optional\n      url, // Url in the catalogue\n      imgUrl, // Image url\n    } = item;\n    const className = ['prod-item', !!oldPrice && 'has_old_price'].filter(Boolean).join(' ');\n    const oldPriceContent = oldPrice\n      ? `<span class=\"prod-item__price_old_price old_price\">${escapeHtml(oldPrice)}${escapeHtml(\n          units,\n        )}</span>`\n      : '';\n    const content = `<div class=\"${className}\" id=\"product-${escapeHtml(id)}\">\n  <a href=\"${escapeHtml(url)}\" class=\"img-holder\">\n    <img src=\"${escapeHtml(imgUrl)}\" alt=\"${escapeHtml(title)}\" />\n  </a>\n  <div class=\"prod-item__right\">\n    <div class=\"prod-item__name\">\n      <a href=\"${escapeHtml(url)}\">${escapeHtml(title)}</a>\n    </div>\n    <div class=\"d-flex txt_14px align-items-center\">–ê—Ä—Ç–∏–∫—É–ª: ${escapeHtml(id)}</div>\n    <div class=\"prod-item__price_and_buttons\">\n      <p class=\"prod-item__price\">\n        ${oldPriceContent} <span class=\"prod-item__price_value\" data-thousand-separate=\"\">${escapeHtml(\n      price,\n    )}</span><span class=\"prod-item__price_units txt_14px\">${escapeHtml(units)}</span>\n      </p>\n      <div class=\"prod-item_buttons\">\n        <button data-remote=\"/add/ok\" class=\"prod-item__btn_cart btn red\" data-buy=\"\" data-id=\"${escapeHtml(\n          id,\n        )}\" data-price=\"${escapeHtml(price)}\" title=\"–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É\">\n          <i class=\"icon icon_cart text-white txt_12px mr-2\"></i> –≤ –∫–æ—Ä–∑–∏–Ω—É\n        </button>\n        <a href=\"${escapeHtml(url)}\" class=\"prod-item__btn_go btn gray\" title=\"–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–æ–¥—É–∫—Ç—É\">\n          <span>ü°¢</span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>`;\n    return content;\n  }\n\n  /** Renders first `maxDisplayingProducts` items of retrieved products.\n   * @param {ProductsItem[]} items\n   */\n  function renderProducts(items) {\n    const content = items.slice(0, maxDisplayingProducts).map(renderProductItem).join('\\n');\n    // NOTE: All the substituted values are escaped\n    itemsContainer.innerHTML = content;\n  }\n\n  /// Server request...\n\n  /** AbortController instance\n   * @type {AbortController|undefined} */\n  let requestController = undefined;\n\n  const apiPathPrefix = !isDev ? '/search/suggestion/?q=' : '/assets/suggestion.json?q=';\n\n  /** Queued request timer handler\n   * @type {ReturnType<typeof setTimeout>|undefined}\n   */\n  let queueTimerHandler = undefined;\n\n  /** Delay to invoke the server request\n   * @type {number}\n   */\n  const acceptChangesDelay = 1000;\n\n  let dataHasBeenLoaded = false;\n\n  let loadingCounter = 0;\n  let waitingCounter = 0;\n\n  /** Set loading panel status\n   * @param {boolean} value\n   */\n  function setLoading(value) {\n    loadingCounter += value ? 1 : -1;\n    searchPanel.classList.toggle('loading', loadingCounter > 0);\n  }\n\n  /** Set waiting panel status\n   * @param {boolean} value\n   */\n  function setWaiting(value) {\n    waitingCounter += value ? 1 : -1;\n    searchPanel.classList.toggle('waiting', waitingCounter > 0);\n  }\n\n  function requestServerData() {\n    // Prepare data...\n    const value = searchValue;\n    const encodedValue = encodeURIComponent(searchValue);\n    // Clear timer\n    clearQueueTimer();\n    // Check active request\n    if (requestController) {\n      // Cancel previously created request, if it's exists\n      requestController.abort();\n    }\n    requestController = new AbortController();\n    const signal = requestController.signal;\n    // Prepare request...\n    const url = apiPathPrefix + encodedValue;\n    // Send and process the request...\n    setLoading(true);\n    const promise = fetch(url, { signal })\n      .then(async (res) => {\n        if (isDev) {\n          await new Promise((resolve) => setTimeout(resolve, 1000));\n        }\n        const { ok, status, statusText } = res;\n        const body = await res.text();\n        if (!ok) {\n          const reason = [status, statusText].filter(Boolean).join(', ');\n          const errMsg = `Request failed (${reason})`;\n          console.error('[search-panel:requestServerData]', errMsg, {\n            status,\n            statusText,\n            body,\n            res,\n            url,\n          });\n          throw new Error(errMsg);\n        }\n        /** @type {object|undefined} */\n        let data = undefined;\n        try {\n          data = JSON.parse(body);\n        } catch (error) {\n          const errMsg = 'Cannot parse response';\n          console.error('[search-panel:requestServerData]', errMsg, {\n            error,\n            body,\n            res,\n            url,\n          });\n          throw new Error(errMsg);\n        }\n        if (!data) {\n          throw new Error('Empty data returned');\n        }\n        if (!Array.isArray(data)) {\n          throw new Error('Expected array data');\n        }\n        return data;\n      })\n      .then((/** @type {ProductsItem[]} */ items) => {\n        // DEMO: Create random data...\n        if (isDev && __genertateDemoProducts) {\n          const count = Math.floor(Math.random() * 6);\n          items = Array.from(Array(count)).map((_none, no) => {\n            // return sampleProduct;\n            const id = 1000 + Math.round(Math.random() * 9000);\n            const price = 50 + Math.round(Math.random() * 600);\n            return Object.assign({}, sampleProduct, {\n              id,\n              value: sampleProduct.value.replace(/^\\d+/, String(id)),\n              price,\n              oldPrice: Math.round(Math.random()) ? price + Math.round(Math.random() * 300) : '',\n            });\n          });\n        }\n        // Render received data\n        renderProducts(items);\n        // Update the state\n        const itemsCount = items.length;\n        resultsCountNode && (resultsCountNode.innerText = String(itemsCount));\n        searchPanel.classList.toggle('has_results', !!itemsCount);\n        dataHasBeenLoaded = true;\n      })\n      .catch((error) => {\n        if (error.name !== 'AbortError') {\n          console.error('[search-panel:requestServerData]', {\n            error,\n            url,\n          });\n          debugger;\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n        requestController = undefined;\n      });\n    return promise;\n  }\n\n  function clearQueueTimer() {\n    if (queueTimerHandler) {\n      clearTimeout(queueTimerHandler);\n      queueTimerHandler = undefined;\n      setWaiting(false);\n    }\n  }\n\n  function setQueueTimer() {\n    clearQueueTimer();\n    queueTimerHandler = setTimeout(requestServerData, acceptChangesDelay);\n    setWaiting(true);\n  }\n\n  /// Routines...\n\n  function closePanel() {\n    if (isVisible) {\n      isVisible = false;\n      updatePanelStatus();\n    }\n  }\n\n  /** Close the panel if the Escape key clicked\n   * @param {KeyboardEvent} ev\n   */\n  function detectEsc(ev) {\n    if (ev.key === 'Escape') {\n      closePanel();\n    }\n  }\n\n  /** Prevent close the panel if it's been clicked inside\n   * @param {MouseEvent} ev\n   */\n  function preventClose(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Close the panel by click outside the panel (see `preventClose` method above)\n   * @param {MouseEvent} _ev\n   */\n  function closeByClick(_ev) {\n    closePanel();\n  }\n\n  function goToResults() {\n    triggerForm.submit();\n  }\n\n  /** @param {string|number|boolean|undefined|null} str\n   * @return {string}\n   */\n  function escapeHtml(str) {\n    if (str == undefined) {\n      return '';\n    }\n    if (typeof str !== 'string') {\n      str = String(str);\n    }\n    str = str.trim();\n    return str.replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n\n  /** Sync search text in document with current value */\n  function updateSearchValueInDocument() {\n    const escapedValue = escapeHtml(searchValue);\n    bodyInput.value = escapedValue;\n    panelInput.value = escapedValue;\n  }\n\n  /** Search text has been changed\n   * @param {Event} _ev\n   */\n  function panelInputChanged(_ev) {\n    searchValue = panelInput.value;\n    bodyInput.value = searchValue;\n    setQueueTimer();\n  }\n\n  function updatePanelStatus() {\n    updateSearchValueInDocument();\n    searchPanel.classList.toggle('visible', !!isVisible);\n    // Set/reset event handlers\n    if (isVisible) {\n      panelInput.addEventListener('input', panelInputChanged);\n      searchPanelContainer.addEventListener('mouseup', preventClose, true);\n      document.addEventListener('mouseup', closeByClick);\n      document.addEventListener('keydown', detectEsc);\n    } else {\n      panelInput.removeEventListener('input', panelInputChanged);\n      searchPanelContainer.addEventListener('mouseup', preventClose);\n      document.removeEventListener('mouseup', closeByClick);\n      document.removeEventListener('keydown', detectEsc);\n    }\n    // Focus in the input field\n    if (isVisible) {\n      setTimeout(() => panelInput.focus(), 100);\n    }\n  }\n\n  /** @param {MouseEvent} ev */\n  function onTriggerClick(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    isVisible = !isVisible;\n    if (!dataHasBeenLoaded && isVisible && searchValue) {\n      requestServerData();\n    }\n    updatePanelStatus();\n  }\n\n  function init() {\n    const closeButton = searchPanel.querySelector('#close-button');\n    const goToResultsButton = searchPanel.querySelector('#go-to-results');\n    const searchPanelButtonButton = searchPanel.querySelector('#search-panel-button');\n\n    const urlParams = new URLSearchParams(window.location.search);\n    searchValue = urlParams.get('q') || '';\n\n    triggerForm.addEventListener('click', onTriggerClick);\n    closeButton && closeButton.addEventListener('click', closePanel);\n    goToResultsButton && goToResultsButton.addEventListener('click', goToResults);\n    searchPanelButtonButton && searchPanelButtonButton.addEventListener('click', goToResults);\n\n    if (isVisible) {\n      updatePanelStatus();\n    } else {\n      updateSearchValueInDocument();\n    }\n  }\n\n  init();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/chunks/search-panel.js"],"sourceRoot":""}